#随笔--ARM体系结构与汇编指令
---
```
1111111111111111111111111111111111111111111111111111
```
> 暂时不知道怎么组织，写多少是多少吧。学习所用的芯片型号为s5pv210，其对应的SoC版本号为Cortex-A8，ARM内核版本号为ARMv7

[TOC]

---
##一些基本概念
###何为交叉编译
两种开发模式：非嵌入式开发和嵌入式开发；非嵌入式开发：A类机编写源代码编译得到可执行程序，发布给A类机运行；嵌入式开发：A类机编写源代码编译得到可执行程序，发布给B类机运行（ubuntu：A类机/开发板：B类机），这就叫交叉编译。

为什么要用交叉编译：嵌入式开发的CPU比较简单，本身无法搭建开发环境，有些甚至连操纵系统都没有；交叉编译可以用高性能的机器为低性能的机器开发软件（包括裸机软件、系统和应用层软件）

###可编程器件
可编程器件的特点：
- CPU在固定的频率的时钟控制下节奏运行
- CPU可以通过总线读取外部存储器设备中的二进制指令，然后解码执行
- 这些可以被CPU解码执行的二进制指令集是CPU设计的时候确定的，是CPU设计者（ARM公司）定义的，本质上是一串
１和０组成的数字。这就是CPU的汇编指令集

从源代码到CPU执行过程：

![此处输入图片的描述](https://raw.githubusercontent.com/TongxinV/Mynote-Embedded/master/1.Basic%20external%20equipment/assets/P002201701132043.png)

###CPU和总线
...命令总线，数据总线，数据总线；...内存通过CPU的地址总线来寻址定位，然后通过CPU数据总线来读写...

###指令集RISC\CISC
两种CPU：`Complex Instruction Set Computer` *复杂指令集CPU* *CISC*，CISC的设计理念是用最少的指令来完成任务譬如计算乘法只需要一条MUL指令即可，因此CISC的CPU本身设计复杂，工艺复杂，但好处是编译器好设计；`Reduced Instruction Set Computer`*精简指令集* *RISC*，编译器的设计变困难了，但是灵活，汇编指令少容易记住

###IO与内存统一编址\IO与内存独立编址
CPU访问外设有两种方式：一种是类似于访问内存的的方式，即把外设的寄存器当作一个内存地址来访问，从而与访问内存相同的方式来操作外设，叫`IO与内存统一编址`,典型代表是采用RISC架构的CPU--ARM;另外一种是使用专用的CPU指令来访问某种特定外设，叫`IO与内存独立编址`,典型代表是采用CISC的CPU--Intel。

*IO与内存统一编址：理论上32位CPU最多只能访问4G的内存，但实际上并没有4G，像s5pv210实际上只支持1.5G，因为CPU在设计的时候不是把所有的地址总线安排了给内存*

###哈佛结构\冯诺依曼结构
程序运行时的两大元素：程序+数据。程序是我们写好的程序经过编译，汇编之后得到的机器码；数据是程序运行过程中定义和产生的变量的值，是可以读写的。简单理解--当程序和数据不区分放在内存中，称为冯诺依曼结构，譬如Intel的CPU；当程序和数据分开独立存储，称为哈佛结构。两者的主要区别就是**处理器能不能实现取指和取数据的并发进行**。

详细的可以参考这篇blog[《重新认识哈佛结构和冯诺依曼结构》](http://www.cnblogs.com/frank-yxs/p/5926218.html)，主要提到了改进型的哈佛结构\为什么ARM是哈佛结构(i-cache|d-cache)

###软件编程控制硬件的关键--寄存器
什么是寄存器？寄存器属于CPU外设的硬件组成部分，看不见摸不着，但真正存在；CPU可以像访问内存一样来访问寄存器（对ARM-CPU来说，占用了内存空间）；寄存器是CPU的硬件设计者指定的，地址多少，什么功能都定下来了，目的是用作外设被编程控制的'活动开关'，即使外部设备能够被编程控制。

正如汇编指令集是CPU的编程接口一样，寄存器是外部硬件的软件编程接口，使用软件编程控制某一硬件，就是编程读写该硬件的寄存器。

两类寄存器：通用寄存器和SFR。通用寄存器（ARM中有37个）是CPU的组成部分，CPU的很多活动都需要通用寄存器的参与和支持；SFR（special function register），如我们上面说的--软件编程控制硬件的接口，用于存放相应外部设备的控制命令，状态或数据。

> 总结：

---
##以s5pv210为例了解与ARM开发的一些知识

###s5pv210的内存映射详解

###CPU和外部存储器的接口

###s5pv210的启动过程

---
##ARM

###ARM的编程模式和7种模式

###ARM的37个寄存器详解

###ARM的异常处理方式简单介绍

---

##ARM汇编指令集




